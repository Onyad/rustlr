// testing memory leaks

define make_closure = lambda x:int, y:int . {
  //print("hello1\n");  
  define bigclosure = lambda z. {
    x = x+z;  y = y*z*1000;
    x+y;
  }
  //print("hello2\n");  
  export bigclosure;
  bigclosure;
} //make_closure

define c = make_closure(1,1);
print(c(5));
print("\n");

while (1) {
  c = make_closure(2,2);  // memory leak?
}

